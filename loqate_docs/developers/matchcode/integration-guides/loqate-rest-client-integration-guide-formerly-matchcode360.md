:::::::::::::::::::::::::::::: {#mainBodyContent role="main" tabindex="-1"}
::::::::::::::::::::::::::::: gd
:::::::::::::::::::::::::::: {.gd__c style="--cols:12"}
::::::::::::::::::::::::::: {.gd__i .section .ptop--96 .c12 style=" --cspan:12; --rspan:1; --cstart:1;"}
:::::::::::::::::::::::::: {.section .gd__s}
::::::::::::::::::::::::: {.gd__a style="--cols: 12;--cspan: 12; --rspan: 1;"}
:::::::::::::::::::::::: {.gd__c style="--cols:12"}
::: {.gd__i .section .c3 .t-hide style=" --cspan:3; --rspan:1; --cstart:auto;"}
- [Loqate Basics](#){aria-expanded="false" toggle="dropdown"
  role="button"}

  ::: dd
  - [Start Here](/developers/getting-started/)
  - [Ways To Integrate](/developers/getting-started/ways-to-integrate/)
  - [Creating API Keys](/developers/getting-started/creating-api-keys/)
  - [List Of Endpoints](/developers/getting-started/list-of-endpoints/)
  - [API Security](/developers/getting-started/api-security/)
  - [Monitoring Account
    Usage](/developers/getting-started/monitoring-account-usage/)
  :::
- [Product support](#){aria-expanded="false" toggle="dropdown"
  role="button"}

  ::: dd
  - [Address Capture](/developers/address-capture/)
  - [Address Verify](/developers/address-verify/)
  - [Store Finder](/developers/store-finder/)
  - [Email Validation](/developers/email-validation/)
  - [Phone Validation](/developers/phone-verification/)
  - [Bank Validation](/developers/bank-verification/)
  - [Geocode](/developers/geocode/)
  - [Matchcode (legacy)](/developers/matchcode/)
  :::
- [Guides](#){aria-expanded="false" toggle="dropdown" role="button"}

  ::: {.dd .nav__side-menu}
  - [Address, Email and Phone Validation](#){aria-expanded="false"
    toggle="dropdown" role="button"}

    ::: dd
    - [Quick setup guide -- Address, Email and Phone
      Validation](/developers/guides/quick/)
    - [Advanced Setup Guide](/developers/guides/advanced-setup-guide/)
    - [Address Capture Integration Best
      Practice](/developers/guides/address-capture-integration-best-practice/)
    - [Enabling new Capture
      features](/developers/guides/enabling-new-capture-features/)
    - [SaaS Platform: Setting up a new
      service](/developers/guides/saas-platform-setting-up/)
    - [SaaS Platform: Integration
      options](/developers/guides/saas-platform-integration-options/)
    - [SaaS Platform: SDK](/developers/guides/saas-platform-sdk/)
    - [The Loqate Saas
      Platform](/developers/guides/the-loqate-saas-platform/)
    :::
  - [Data Maintenance](#){aria-expanded="false" toggle="dropdown"
    role="button"}

    ::: dd
    - [Data Maintenance - Post
      Processing](/developers/guides/data-maintenance-post-processing/)
    :::
  - [Data Sets](#){aria-expanded="false" toggle="dropdown"
    role="button"}

    ::: dd
    - [Consuming Premium Data
      Sets](/developers/guides/consuming-premium-data-sets/)
    - [Property Intelligence User
      Guide](/developers/guides/property-intelligence-user-guide/)
    - [Property Intelligence Data
      Directory](/developers/guides/property-intelligence-data-directory/)
    :::
  - [Integrations by platform](#){aria-expanded="false"
    toggle="dropdown" role="button"}

    ::: dd
    - [Adobe Commerce
      (Magento)](/developers/guides/adobe-commerce-magento-integration-guide/)
    - [BigCommerce](/developers/guides/bigcommerce/)
    - [commercetools](/developers/guides/commercetools-integration/)
    - [Microsoft Dynamics
      365](/developers/guides/loqate-for-microsoft-dynamics-365/)
    - [Shopify
      Plus](/developers/guides/the-loqate-shopify-integration-guide/)
    - [Shopware
      6](/developers/guides/loqate-plugin-for-shopware-6-configuration-guide/)
    :::
  - [Store Finder](#){aria-expanded="false" toggle="dropdown"
    role="button"}

    ::: dd
    - [How Does a Store Finder
      Work?](/developers/guides/how-does-a-store-finder-work/)
    - [Creating and Managing Location
      Lists](/developers/guides/creating-and-managing-location-lists/)
    - [How To Implement a Store
      Finder](/developers/guides/how-to-implement-a-store-finder/)
    - [Setting Up Store Finder
      Keys](/developers/guides/setting-up-store-finder-keys/)
    :::
  - [Utilities Register](#){aria-expanded="false" toggle="dropdown"
    role="button"}

    ::: dd
    - [Loqate Utilities Register
      2.0](/developers/guides/loqate-utilities-register/)
    :::
  :::
- [APIs](/developers/api/){aria-expanded="false" toggle="dropdown"
  role="button"}

  ::: dd
  - [Address Capture](/developers/api/capture/)
  - [Address Verify](/developers/api/cleanseplus/)
  - [Store Finder](/developers/apis/location-services/)
  - [Email Validation](/developers/api/emailvalidation/)
  - [Phone Validation](/developers/api/phonenumbervalidation/)
  - [Bank Validation](/developers/api/bankaccountvalidation/)
  - [Geocode](/developers/api/distancesanddirections/)
  - [Generic Errors](/developers/api/generic-errors/)
  :::
- [Sandbox](/developers/sandbox/)
- [FAQs](#){aria-expanded="false" toggle="dropdown" role="button"}

  ::: dd
  - [Address Capture](/developers/faqs/Address-Capture)
  - [Address Verification](/developers/faqs/Address-Verification)
  - [Bank Account
    Verification](/developers/faqs/Bank-Account-Verification)
  - [Common account errors](/developers/faqs/Common-account-errors)
  - [Data Maintenance Annual
    Subscription](/developers/faqs/Data-Maintenance-Annual-Subscription)
  - [Email Verification](/developers/faqs/Email-Verification)
  - [General](/developers/faqs/General)
  - [Geocoding](/developers/faqs/Geocoding)
  - [Geolocation](/developers/faqs/Geolocation)
  - [Phone Verification](/developers/faqs/Phone-Verification)
  - [Technical](/developers/faqs/Technical)
  :::
:::

:::::::::::::::::::::: {.gd__i .section .c9 style=" --cspan:9; --rspan:1; --cstart:auto;"}
::::::::::::::::::::: gd
:::::::::::::::::::: {.gd__c style="--cols:12"}
::::::::::::::::::: {.gd__i .section .gd--cen .content .c12 style="--cspan:12;--rspan:1;--cstart:1;"}
:::::::::::::::::: {.section .gd__s}
::::::::::::::::: {.gd__a style="--cols: 12;--cspan: 12; --rspan: 1;"}
:::::::::::::::: {.gd__c style="--cols:12"}
::: {.gd__i .rte .c12 style="--cspan:12;--rspan:1;--cstart:auto;"}
## Loqate REST Client Integration Guide (Formerly Matchcode360)

This guide explains how to access Matchcode360 Web service products
using their Identity Management Platform (IdM), available via REST
WebServices, from a Web Client Environment (Web Browser), by using
***javascript***. The document won\'t provide a general description of
the available functionality, as this is already treated on other
documents ([Integration
Fundamentals](/developers/matchcode/general-information/integration-fundamentals/ "Integration Fundamentals"){rel="noopener"
target="_blank"}). Instead, it will focus on the Integration from
Javascript case.

The operations and the options available to get the data remains the
same. The only difference from the classic *server-to-server *way is
how, when and where the Authentication operation is performed and also
how the Token obtained is used in the subsequent transactions. Also, the
technology used on the browser to call the WebServices (javascript) will
change from the one used on the servers, but this term is up to the
customer.
:::

::: {.gd__i .rte .c12 style="--cspan:12;--rspan:1;--cstart:auto;"}
### Client Side Integration {#CSI}

Integrating to WebServices from the client side (javascript) involves
some problems that need to be addressed.\
\

1.  Browsers are not allowed to send Http calls to other Origins
    different from the Origin serving the Web Page, unless *CORS (Cross
    Origin Resource Sharing)* is allowed on the remote server.
2.  Credentials used to Authenticate on the remote server might be
    stolen as all the javascript code is visible and easily accessible
    for the clients.

\
In order to sort the point 1 out, IdM servers
allow *CORS* communications. This means that client\'s browsers HTTP
calls are allowed (only for certain applications). The browsers first
check if the target server allow CORS calls and if so, they perform the
HTTP call.

In order to sort the point 2 out, the Authentication step needs to be
done on the customer\'s server side (classic server-to-server
communication), and the Token obtained should be shared to the client
browser to be used for a fixed amount of time. Thus, if for some reason
the Token is comprised, it will be valid only for a period of time (24
hours normally).

Taking into account the above, the Client Side Integration process would
be as follows:\
\

1.  The customer\'s server perform an *AuthenticateUser* call to the
    existing Matchcode360 REST Services by using the usual credentials
    ([Authentication and Fixed Duration
    Tokens](#AuthenticationAndFixedDurationTokens){anchor="#AuthenticationAndFixedDurationTokens"}).
2.  The customer\'s server stores internally the Token obtained in the
    above operation, which will be valid for 24 hours.
3.  When the customers\'s server receives a request to serve a Web Page,
    where the javascript calls to Matchcode360 will be performed from,
    the server will serve the Web Page and pass the Token obtained
    previously and the username to be used.
4.  The javascript code on the WebPage will use the username and Token
    passed to call Matchcode360 REST WebService, by running
    the *executeCapture *operation.
5.  The Token will be valid for 24 hours, and can be used in as many
    browser sessions as needed, as it can be used concurrently.
6.  The customer\'s server is recommended to have more than 1 valid
    Token available to be served to their clients. Thus, the server
    won\'t pass a Token that is about to expire, but other Token with
    some longer duration.
7.  A customer account can have 10 valid Tokens issued at the same time
    as many. Although, as already said, the same Token can be widely
    used for all their clients requests.
:::

:::::::: {.gd__i .rte .c12 style="--cspan:12;--rspan:1;--cstart:auto;"}
### []{#AuthenticationAndFixedDurationTokens}Authentication and Fixed Duration Tokens {#Authentication}

As already explained, the Authentication operation must happen at the
customer\'s server side in order to get 1 or more available Tokens for
the browser clients.

This Authentication operation needs to send an additional parameter to
let the IdM Servers know that the Token to be issued is a ***Fixed
Duration Token***. This means, the Token won\'t expire based on its use
(for instance one hour later the last time it was used on any
Transaction). Rather, it will expire always after a fixed amount of time
from when it was issued.\
\

::: {#div4_authenticateUserREST}
#### **Calling authenticateUser** {#3_1}

\
The* *call to* authenticateUser *comprises the endpoint, resource string
and request details:**\
**

**Request Type:** GET\
**Endpoint:** <https://idmp.gb.co.uk>\
**Resource:**
idm-core-rest-globalservices/\<version\>/authentication/authenticateUser\
**Request:**
username=\<**yourUserName**\>&password=\<**yourPassword**\>**&fixedduration=true**

Where:

**\<version\>**is the current version of the Matchcode360 service.  For
example, for version 21a (first version released in 2021)\
**\<yourUserName\>** and **\<yourPassword\>** are the credentials given
to you by GBG

Optionally, you can also pass the
parameter *ipAddress *to *authenticateUser* to tie the searching to an
IP address. If *ipAddress* is supplied to *authenticateUser*, then the
same IP address must be provided with
subsequent *executeCapture* requests using this authentication token.

The parameters for authenticateUser are summarised in the table below:

**Type: AuthenticateUserRequest**
:::

:::::: {#div1_2_2_ExecutionProcess}
::::: {#div1_2_2_1_AuthenticateUser}
::: {#div1_2_2_1_1_AuthenticateUser_InputDetails}
  --------------------------------------------------------------------------
  Field Name              Type                    Description
  ----------------------- ----------------------- --------------------------
  **username**            String                  The username used to
                                                  access the system
                                                  including domain name
                                                  (e.g. user1@mydomain.com)

  **password**            String                  The user\'s password

  **ipAddress**           String                  (Optional) The IPv4
                                                  Address of the requesting
                                                  machine.\
                                                  \
                                                  Note that if
                                                  an ipAddress is supplied
                                                  to **authenticateUser**,
                                                  then the
                                                  same ipAddress must be
                                                  provided with subsequent
                                                  requests using this
                                                  authentication.

  **fixedduration**       String                  Mandatory for Client Side
                                                  Integration.\
                                                  \
                                                  This generates a \"fixed
                                                  duration\" Token, to be
                                                  used from the browser
                                                  client side.\
                                                  \
                                                  Values: true. Other value
                                                  than \"true\" would cause
                                                  the Token not to be
                                                  \"fixed duration\"
  --------------------------------------------------------------------------
:::

::: {#div1_2_2_1_2_AuthenticateUser_OutputDetails}
:::
:::::
::::::
::::::::

::: {.gd__i .rte .c12 style="--cspan:12;--rspan:1;--cstart:auto;"}
#### **Example authenticateUser Request** {#3_2}

\
GET
host/idm-core-rest-globalservices/21a/authentication/authenticateUser?username= user1@mydomain.com&password=myPassword&fixedduration=true

#### **authenticateUser Response** {#3_3}

\
The returned data from the *authenticateUser* request includes:

1.  Unique authentication token *and*
2.  Error/success codes *and*
3.  Connection details

\
The full *authenticateUser* response from the REST service contains the
following fields:

  Field Name                Type       Description
  ------------------------- ---------- ----------------------------------------------------------------------------------
  **authenticationToken**   String     Unique authentication token to be passed into the subsequent Execute method call
  **authenticationTime**    DateTime   Authentication time
  **fullUserName**          String     Full user name
  **userGuid**              String     The unique identifier for the user
  **username**              String     User name without domain
  **domain**                String     The domain name of the authenticated user
  **lastLogin**             DateTime   Last login for the user
  **sessionExpiryTime**     DateTime   Session expiry date and time

 

In case of Error, these are the fields obtained: 

  Field Name          Type       Description
  ------------------- ---------- ----------------------------------
  **httpStatus**      String     Http Status code in the Response
  **faultType**       DateTime   Sort of Error
  **errorCode**       String     Error code
  **errorMessage**    String     Error Message
  **transactionId**   String     Transaction Id
:::

::::: {.gd__i .rte .c12 style="--cspan:12;--rspan:1;--cstart:auto;"}
#### **Example authenticateUser Response** {#3_4}

::: {.snippet .bg-midnight-600 .mtop--32 .mbtm--32}
``` {.line-numbers .language-javascript .bg-midnight-600}
{
   "authenticationToken": "1C986C48-6CFD-492C-B305-04BAB6EB76AA",
   "authenticationTime": "2017-06-02T09:55:30.255Z",
   "fullUsername": " user1@mydomain.com",
   "userGuid": "359628C7-4AC3-4B33-B7FA-31FC81A8479E",
   "username": "user1",
   "domain": "mydomain.com",
   "domainType": "ORGANISATION",
   "lastLogin": "2017-05-31T19:46:12.000Z",
   "sessionExpiryTime": "2017-06-03T09:55:30.255Z"
}
```
:::

In case of Error, this would be an example of Error Response:

::: {.snippet .bg-midnight-600 .mtop--32 .mbtm--32}
``` {.line-numbers .language-javascript .bg-midnight-600}
{
    "httpStatus": "200",
    "faultType": "BUSINESSERROR",
    "errorCode": "BE010009",
    "errorMessage": "Invalid authentication details supplied.",
    "transactionId": "4C29850E-613C-4535-98EF-8C0947D04117"
}
```
:::
:::::

::: {.gd__i .rte .c12 style="--cspan:12;--rspan:1;--cstart:auto;"}
### Running Transactions from javascript {#Transactions}

Once there\'re one or more valid Tokens available on the server side,
either of them can be used to perform transaction calls from the
browsers. As already mentioned, the same Token can be used concurrently
from multiple browsers.

When serving the Web Page, the server will write the selected valid
Token on it, to be used on the subsequent javascript REST calls.

The technology used on the client side to perform the calls is
customer\'s choice. There are multiple options, from pure javascript
code or using any of the well-known javascript libraries (such as
JQuery).

IdM Matchcode360 Servers are ready to receive CORS calls. So the
client\'s javascript code must use CORS calls to perform the
client-to-server HTTP Rest calls.

The CORS HTTP calls are based on 2 inner calls:\
\

1.  PreFlight calls for the browser to know if CORS is allowed on the
    remote server and which operations and headers are allowed.
2.  Actual HTTP REST call performing the transaction.

\
The existing javascript libraries usually carry out both calls
out-of-the-box, so developers don\'t need to care about it.

The JSON / XML to be sent to perform a Matchcode360 REST Request and the
fields content as well as the responses from the REST WebService are the
same regardless the origin of the calls (server or client). Thus, the
user can query other articles to get that information ([Integration
Fundamentals](/developers/matchcode/general-information/integration-fundamentals/ "Integration Fundamentals"){rel="noopener"
target="_blank"}).
:::
::::::::::::::::
:::::::::::::::::
::::::::::::::::::
:::::::::::::::::::
::::::::::::::::::::
:::::::::::::::::::::
::::::::::::::::::::::
::::::::::::::::::::::::
:::::::::::::::::::::::::
::::::::::::::::::::::::::
:::::::::::::::::::::::::::
::::::::::::::::::::::::::::
:::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::
